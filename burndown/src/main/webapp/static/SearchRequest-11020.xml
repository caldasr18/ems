<!--
RSS generated by JIRA (4.2#587) at Fri Jan 11 18:46:46 CET 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.billpay.intern/sr/jira.issueviews:searchrequest-xml/11020/SearchRequest-11020.xml?tempMax=1000&field=key&field=summary
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://jira.billpay.intern/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>43. Sprint Preliminary (Billpay Ticketsystem)</title>
        <link>https://jira.billpay.intern/secure/IssueNavigator.jspa?requestId=11020</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="24" total="24"/>
                <build-info>
            <version>4.2</version>
            <build-number>587</build-number>
            <build-date>17-10-2010</build-date>
            <edition>enterprise</edition>
        </build-info>
<item>
            <title>[IPL-9388] MS - Clear unused methods, classes and SPs and unnecessary dependencies</title>
                <link>https://jira.billpay.intern/browse/IPL-9388</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;For Merchant Service.&lt;br/&gt;
Find and remove unused classes and methods.&lt;/p&gt;

&lt;p&gt;Remove unused imports in the classes.&lt;br/&gt;
Find and remove unused stored procedures.&lt;/p&gt;</description>
                <environment/>
            <key id="23269">IPL-9388</key>
            <summary>MS - Clear unused methods, classes and SPs and unnecessary dependencies</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="22655">IPL-8781</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 17:21:14 +0100</created>
                <updated>Thu, 10 Jan 2013 17:23:06 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - API</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="21600">6 hours</timeoriginalestimate>
                    <timeestimate seconds="21600">6 hours</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9387] BO - Clear unused methods, classes and SPs and unnecessary dependencies</title>
                <link>https://jira.billpay.intern/browse/IPL-9387</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;For Backoffice.&lt;br/&gt;
Find and remove unused classes and methods.&lt;br/&gt;
Examples of things to throw out.&lt;br/&gt;
net.ipaylater.backend.deltavistav2.client&lt;/p&gt;

&lt;p&gt;Remove unused imports in the classes.&lt;br/&gt;
Find and remove unused stored procedures.&lt;/p&gt;
</description>
                <environment/>
            <key id="23268">IPL-9387</key>
            <summary>BO - Clear unused methods, classes and SPs and unnecessary dependencies</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="22655">IPL-8781</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 17:20:26 +0100</created>
                <updated>Thu, 10 Jan 2013 17:25:21 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="21600">6 hours</timeoriginalestimate>
                    <timeestimate seconds="21600">6 hours</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9386] BO - Change the protected and default members of the class to private.</title>
                <link>https://jira.billpay.intern/browse/IPL-9386</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;For Backoffice project.&lt;br/&gt;
Find all Interface implementations and change the protected/package protected members of the class to private. &lt;br/&gt;
Clean unused and unnecessary dependencies like described in the main ticket.&lt;/p&gt;</description>
                <environment/>
            <key id="23267">IPL-9386</key>
            <summary>BO - Change the protected and default members of the class to private.</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="22655">IPL-8781</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 17:11:30 +0100</created>
                <updated>Thu, 10 Jan 2013 17:24:36 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="21600">6 hours</timeoriginalestimate>
                    <timeestimate seconds="21600">6 hours</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9385] MS - Change the protected or default members of the class to private</title>
                <link>https://jira.billpay.intern/browse/IPL-9385</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;For merchant services project.&lt;br/&gt;
Find all Interface implementations and change the protected/package protected members of the class to private. &lt;br/&gt;
Clean unused and unnecessary dependencies like described in the main ticket.&lt;/p&gt;</description>
                <environment/>
            <key id="23266">IPL-9385</key>
            <summary>MS - Change the protected or default members of the class to private</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="22655">IPL-8781</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 17:09:40 +0100</created>
                <updated>Thu, 10 Jan 2013 17:23:41 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - API</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="21600">6 hours</timeoriginalestimate>
                    <timeestimate seconds="21600">6 hours</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9384] BO - Adjust order history - display new event</title>
                <link>https://jira.billpay.intern/browse/IPL-9384</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Adjust JSP in BO for the new reactivation event.&lt;/p&gt;</description>
                <environment/>
            <key id="23265">IPL-9384</key>
            <summary>BO - Adjust order history - display new event</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="16624">IPL-2988</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 16:45:52 +0100</created>
                <updated>Thu, 10 Jan 2013 16:45:52 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="3600">1 hour</timeoriginalestimate>
                    <timeestimate seconds="3600">1 hour</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9383] Create test cases for reactivation stored procedure.</title>
                <link>https://jira.billpay.intern/browse/IPL-9383</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Create at least 4 test cases.&lt;br/&gt;
3 - tests for the cases mentioned in the ticket.&lt;br/&gt;
One test case for order which is not allowed to be reactivated.&lt;br/&gt;
Consider if it is needed to test for all payment methods.&lt;/p&gt;</description>
                <environment/>
            <key id="23264">IPL-9383</key>
            <summary>Create test cases for reactivation stored procedure.</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="16624">IPL-2988</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 16:40:43 +0100</created>
                <updated>Thu, 10 Jan 2013 16:40:43 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="57600">2 days</timeoriginalestimate>
                    <timeestimate seconds="57600">2 days</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9382] Create reactivation stored procedure</title>
                <link>https://jira.billpay.intern/browse/IPL-9382</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Create stord procedure for reactivation.&lt;br/&gt;
It should take the main order id parameter.&lt;br/&gt;
Reuse the check conditions (seperate stored procedures?) implemented for checking if the order is allowed to be reactivated.&lt;br/&gt;
Create logic for each case.&lt;br/&gt;
Store the new event.&lt;/p&gt;
</description>
                <environment/>
            <key id="23263">IPL-9382</key>
            <summary>Create reactivation stored procedure</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="16624">IPL-2988</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 16:35:32 +0100</created>
                <updated>Thu, 10 Jan 2013 16:43:03 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="57600">2 days</timeoriginalestimate>
                    <timeestimate seconds="57600">2 days</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9381] BO - Adjust order history - reactivate action</title>
                <link>https://jira.billpay.intern/browse/IPL-9381</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Implement action method for reactivation.&lt;br/&gt;
Create  service method for reactivation.&lt;br/&gt;
Create stored procedures class for reactivation. (this does not include implementing the stored procedure).&lt;br/&gt;
The param should be order id.&lt;br/&gt;
Secure the method in spring security context.&lt;br/&gt;
We don't show any confirmation prompt.&lt;/p&gt;
</description>
                <environment/>
            <key id="23262">IPL-9381</key>
            <summary>BO - Adjust order history - reactivate action</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="16624">IPL-2988</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 16:29:25 +0100</created>
                <updated>Thu, 10 Jan 2013 16:29:25 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="14400">4 hours</timeoriginalestimate>
                    <timeestimate seconds="14400">4 hours</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9380] BO - Adjust order history - check conditions</title>
                <link>https://jira.billpay.intern/browse/IPL-9380</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Create hibernate a new stored procedure for checking if the reactivation is allowed.&lt;br/&gt;
Extend the fetch action history procedure to return flag 'is allowed to reactivate'.&lt;br/&gt;
Include the newly created storde procedure inside of it.&lt;/p&gt;</description>
                <environment/>
            <key id="23261">IPL-9380</key>
            <summary>BO - Adjust order history - check conditions</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="16624">IPL-2988</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="jmueller">Jan Müller</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 16:23:33 +0100</created>
                <updated>Fri, 11 Jan 2013 08:55:08 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="36000">1 day, 2 hours</timeoriginalestimate>
                    <timeestimate seconds="36000">1 day, 2 hours</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9379] BO - Adjust order history - show reactivate button.</title>
                <link>https://jira.billpay.intern/browse/IPL-9379</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;The button will be shown only in the main order history.&lt;br/&gt;
Adjust jsp. &lt;br/&gt;
Display the button only if one of the order fullfils the specified cases logic. (Look main ticket.)&lt;br/&gt;
The button is displayed only for the latest cancel event.&lt;br/&gt;
Fetch the infromation from adjusted event history service.&lt;/p&gt;

&lt;p&gt;Secure with spring security (add new roles)&lt;br/&gt;
for exeample. ROLE_REACTIVATE_ORDER&lt;br/&gt;
Assign to the role ADMIN and CC.&lt;/p&gt;</description>
                <environment/>
            <key id="23260">IPL-9379</key>
            <summary>BO - Adjust order history - show reactivate button.</summary>
                <type id="5" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_edit.png">Dev-Task</type>
                    <parent id="16624">IPL-2988</parent>
                        <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/user_add.png">Open</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="jmueller">Jan Müller</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 16:16:38 +0100</created>
                <updated>Fri, 11 Jan 2013 08:55:06 +0100</updated>
                                    <version>42. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="10800">3 hours</timeoriginalestimate>
                    <timeestimate seconds="10800">3 hours</timeestimate>
                                          <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9372] Complete adjust get billpay bank data. For real factoring orders</title>
                <link>https://jira.billpay.intern/browse/IPL-9372</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description/>
                <environment/>
            <key id="23253">IPL-9372</key>
            <summary>Complete adjust get billpay bank data. For real factoring orders</summary>
                <type id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_gear.png">Task</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10012" iconUrl="https://jira.billpay.intern/images/icons/silk/cup.png">Pending</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="wmlynarski">Wieslaw Mlynarski</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 10:36:49 +0100</created>
                <updated>Thu, 10 Jan 2013 16:26:21 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="21600">6 hours</timeoriginalestimate>
                    <timeestimate seconds="21600">6 hours</timeestimate>
                                      <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                <outwardlinks description="belongs to">
                            <issuelink>
            <issuekey id="21404">IPL-7563</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="23003">IPL-9129</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                    </customfields>
    </item>

<item>
            <title>[IPL-9370] Complete adjust merchant invoice</title>
                <link>https://jira.billpay.intern/browse/IPL-9370</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description/>
                <environment/>
            <key id="23251">IPL-9370</key>
            <summary>Complete adjust merchant invoice</summary>
                <type id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/page_white_gear.png">Task</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10012" iconUrl="https://jira.billpay.intern/images/icons/silk/cup.png">Pending</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="wmlynarski">Wieslaw Mlynarski</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2013 10:29:04 +0100</created>
                <updated>Fri, 11 Jan 2013 11:41:06 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="28800">1 day</timeoriginalestimate>
                    <timeestimate seconds="21600">6 hours</timeestimate>
                    <timespent seconds="7200">2 hours</timespent>
                                <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                <outwardlinks description="belongs to">
                            <issuelink>
            <issuekey id="21404">IPL-7563</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="23003">IPL-9129</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[merchant invoice]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-9355]  Other: "Schuldbeitritt" for Direct Debit/DEU</title>
                <link>https://jira.billpay.intern/browse/IPL-9355</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Build this user story upon the "Real factoring" infrastructure for Invoice (see &lt;a href="https://jira.billpay.intern/browse/IPL-7563" title="Main ticket: real Factoring, e.g. merchant invoice immediately"&gt;IPL-7563&lt;/a&gt;):&lt;/p&gt;

&lt;p&gt;1) Make selectable dropdown in BO for direct debit / DEU (duplicate three GUI fields frim Invoice)&lt;br/&gt;
2) Flag orders/debts as factoring (use same column as for invoice)&lt;br/&gt;
3) Merchant Invoice: use same reimbursement/invoice logic as for fatoring invoice. assign transactions to the same labels.&lt;br/&gt;
4) Check if load queue processing all types of transaction for DD with factoring bank account is possible (no changes should be necessary, factoring branch should be able to handle this). &lt;br/&gt;
TO BE CLARIFIED: this is direct debit w/o UKTO -&amp;gt; new! Would be better to not use merchant order reference but our debt ID.&lt;br/&gt;
5) add "0" to merchant payout dropdown in BO&lt;br/&gt;
6) create EBICS connection to fetch bank transactions&lt;br/&gt;
7) TO BE CLARIFIED: how will direct debits be sent to the bank (DTAUS, MT104)?&lt;/p&gt;</description>
                <environment/>
            <key id="23236">IPL-9355</key>
            <summary> Other: "Schuldbeitritt" for Direct Debit/DEU</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="10013" iconUrl="https://jira.billpay.intern/images/icons/silk/eye.png">In Revision</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jwehrs">Jan Wehrs</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jan 2013 17:46:26 +0100</created>
                <updated>Fri, 11 Jan 2013 18:31:08 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - API</component>
                <component>application - background</component>
                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="41417" author="jwehrs" created="Tue, 8 Jan 2013 17:51:36 +0100">@Sven/Duc: k&amp;#xF6;nnt ihr kurz dr&amp;#xFC;berfliegen.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                <outwardlinks description="belongs to">
                            <issuelink>
            <issuekey id="23307">IPL-9426</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                                                            </customfields>
    </item>

<item>
            <title>[IPL-9341] All mails via Lettershop for TC/DEU</title>
                <link>https://jira.billpay.intern/browse/IPL-9341</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>

&lt;p&gt;We want to send via lettershop following notifications: &lt;/p&gt;

&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;dunning 2&lt;/li&gt;
	&lt;li&gt;open payment (Gesamtfälligkeitsstellung)&lt;/li&gt;
	&lt;li&gt;inkasso notification (contract termination)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Like we do for AUT - see &lt;a href="https://jira.billpay.intern/browse/IPL-8375" title="Transactioncredit CHE/AUT: Communication via Lettershop"&gt;&lt;del&gt;IPL-8375&lt;/del&gt;&lt;/a&gt; same templates.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;please check where we use &lt;b&gt;##Tempfield_currency##&lt;/b&gt; and &lt;b&gt;EUR&lt;/b&gt;. Choose one and change all others for consistency&lt;/li&gt;
	&lt;li&gt;adjust changes seen in the word documents to the already existing lettershop for AUT&lt;/li&gt;
	&lt;li&gt;test new parameter ##Tempfield_total_discharge_fee## (3% surcharge, because we do not get the interests for a full installment plan)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Not part of this, but related&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;for AUT, check if we charge this total discharge fee, if the customer is repayming his isntallment plan earlier (in one go), because there, we are not allowed to charge any fees&lt;br/&gt;
in German: Bitte nachgucken, ob wir eine Vorfälligkeitsentschädigung bei frühzeitiger ablöse in AUT nehmen. Das dürfen wir in AUT nicht.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment/>
            <key id="23222">IPL-9341</key>
            <summary>All mails via Lettershop for TC/DEU</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="10014" iconUrl="https://jira.billpay.intern/images/icons/silk/thumb_up.png">Specified</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jwehrs">Jan Wehrs</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jan 2013 13:19:35 +0100</created>
                <updated>Thu, 10 Jan 2013 14:37:06 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="41406" author="skuhn" created="Tue, 8 Jan 2013 16:31:26 +0100">DUC pls check templates and attache them till tomorrow. thx</comment>
                    <comment id="41459" author="dnguyen" created="Wed, 9 Jan 2013 16:39:02 +0100">Uploaded files:&lt;br/&gt;
contract_termination_tc_deu_aut_09_01_2013.docx&lt;br/&gt;
dunning_2_tc_aut_deu_09_01_2013.docx&lt;br/&gt;
open_payments_tc_aut_deu_09_01_2013.docx&lt;br/&gt;
&lt;br/&gt;
same templates for both countries&lt;br/&gt;
added a subject for all templates, a new parameter ##Tempfield_total_discharge_fee## and a few small things (see Word documents).&lt;br/&gt;
&lt;br/&gt;
please, add these changes also to the already implemented lettershop for AUT</comment>
                </comments>
                    <attachments>
                    <attachment id="21400" name="contract_termination_tc_deu_aut_09_01_2013.docx" size="15717" author="dnguyen" created="Wed, 9 Jan 2013 16:39:02 +0100"/>
                    <attachment id="21401" name="dunning_2_tc_aut_deu_09_01_2013.docx" size="16448" author="dnguyen" created="Wed, 9 Jan 2013 16:39:02 +0100"/>
                    <attachment id="21402" name="open_payments_tc_aut_deu_09_01_2013.docx" size="17262" author="dnguyen" created="Wed, 9 Jan 2013 16:39:02 +0100"/>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                                                        <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[3]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-9310] Implement a Third Dunning in Place of Reminder 2</title>
                <link>https://jira.billpay.intern/browse/IPL-9310</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;&lt;b&gt;Specified&lt;/b&gt;&lt;/p&gt;

&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Introduction&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;Exchange Reminder 2 with a new Dunning 0.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Description&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;As-Is-Status&lt;/th&gt;
&lt;th class='confluenceTh'&gt;Should-Be-Status&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt;We don't use Reminder 2 and don't have 3 dunnings&lt;/td&gt;
&lt;td class='confluenceTd'&gt;The system should be supplemented by one more dunning, which needs to be send out before dunning 1. Therefor we can take reminder 2, which we actually don't use and exchange reminder 2 with dunning 0. We must ensure that there is no dependency to dunning 1 and 2. The code should be examined. Dunning fee and due dates have to be adjustable. By default we use dunning 1 and 2 and the reminder 1. If we can use reminder 2 in exchange then we can maintain the backoffice view and use the field "2.Zahlungserinnerung" for dunning 0. To summarize the whole, we need dunning 0, dunning 1, dunning 2, everything else remains the same.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;Operations team has already tried this for one merchant (Apart Faschion), but there seems to be a dependency, which prevents Dunning 1 from being send.&lt;br/&gt;
Here is the full story:&lt;br/&gt;
1. customer orders an item&lt;br/&gt;
2. order is activated by merchant&lt;br/&gt;
3. customer does not pay until due date and gets Dunning 0 email including +4€ dunning fee&lt;br/&gt;
3. customer does not pay until Dunning 0 due date&lt;br/&gt;
4. customer does not pay&lt;br/&gt;
5. nothing happens (no Dunning 1 is sent)&lt;br/&gt;
6. customer still doesn't pay and gets Dunning 2 email + 6€ dunning fee&lt;/p&gt;

&lt;p&gt;we think, our system sets the status to dunning 1, once there is a dunning fee on the order.&lt;br/&gt;
of course, nothing happens, because the order is already in dunning 1.&lt;br/&gt;
only with dunning 2 there is a new status and dunning email.&lt;/p&gt;





&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/div&gt;&lt;/div&gt; 
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;list&lt;/li&gt;
	&lt;li&gt;here&lt;/li&gt;
	&lt;li&gt;all&lt;/li&gt;
	&lt;li&gt;todos&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment/>
            <key id="23191">IPL-9310</key>
            <summary>Implement a Third Dunning in Place of Reminder 2</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="10014" iconUrl="https://jira.billpay.intern/images/icons/silk/thumb_up.png">Specified</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="dnguyen">Duc Hoang Nguyen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jan 2013 16:28:19 +0100</created>
                <updated>Thu, 10 Jan 2013 14:26:26 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="41309" author="jwehrs" created="Mon, 7 Jan 2013 10:46:29 +0100">@Duc: is this user story fully specified?</comment>
                    <comment id="41387" author="smoghaddam" created="Tue, 8 Jan 2013 12:10:40 +0100">the third dunning should be launched as a test for a few shops. That&amp;#39;s why we want to make it as easy as possible, using reminder 2 in exchange.</comment>
                    <comment id="41504" author="skuhn" created="Thu, 10 Jan 2013 14:26:26 +0100">Not ready to estimate</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_10040" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Business Value</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[90]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[customers]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                </customfields>
    </item>

<item>
            <title>[IPL-9303] [Main Ticket] Merchant Invoices and Move of Due Date</title>
                <link>https://jira.billpay.intern/browse/IPL-9303</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Introduction&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;For payment methods invoice and invoice + real factoring in Germany and Austria (transaction credit in Germany and Austria has already been specified in &lt;a href="https://jira.billpay.intern/browse/IPL-8374"&gt;https://jira.billpay.intern/browse/IPL-8374&lt;/a&gt;), here is what to do after a move of a due date takes place.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;h3&gt;&lt;a name="MerchantInvoiceProcessafteraMoveofDueDateforTransactionCreditinAUT%2FCHE%2FDEU%28sameprocessforallthreecountries%29"&gt;&lt;/a&gt;Merchant Invoice Process after a Move of Due Date for &lt;ins&gt;Transaction Credit&lt;/ins&gt; in &lt;ins&gt;AUT/CHE/DEU&lt;/ins&gt; (same process for all three countries)&lt;/h3&gt;

&lt;div class="panel" style="border-width: 1px;"&gt;&lt;div class="panelContent"&gt;
&lt;p&gt; &lt;b&gt;Summary of the rules:&lt;/b&gt; (see PPT)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Merchant reimbursement/reverse disbursement&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;If a move occure, then:&lt;br/&gt;
1 Rule: If the new merchant payoff date lies in the past then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, do nothing. If it is FALSE, TODO: reimburse&lt;br/&gt;
2 Rule: If the new merchant payoff date lies in the future,then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, TODO: reverse reimbursement. If it is FALSE, do nothing.&lt;/p&gt;

&lt;p&gt;LEGEND&lt;br/&gt;
merchant payoff date= d_invoiced + d_invoice_delay + mrcph_payoff_after_days + moving period&lt;/p&gt;

&lt;p&gt;    moving period = new due date - old due date (in days) (eg: move dd by 5 days, than also move mrcph payoff date by 5 days)&lt;br/&gt;
    d_invoiced: date on which we received the invoiceCreated request&lt;br/&gt;
    d_invoice_delay: "delayindays" parameter that we might receive in the invoiceCreated request from the merchant&lt;br/&gt;
    mrcp_payoff_after_days: configurable offset from portal payment settings used to hold back the payout&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt; 


&lt;h3&gt;&lt;a name="MerchantInvoiceProcessafteraMoveofDueDateforInvoiceinAUT%2FCHE%2FDEU%28sameprocessforallthreecountries%29"&gt;&lt;/a&gt;Merchant Invoice Process after a Move of Due Date for &lt;ins&gt;Invoice&lt;/ins&gt; in &lt;ins&gt;AUT/CHE/DEU&lt;/ins&gt; (same process for all three countries)&lt;/h3&gt;

&lt;div class="panel" style="border-width: 1px;"&gt;&lt;div class="panelContent"&gt;
&lt;p&gt;&lt;b&gt;Merchant reimbursement/reverse disbursement&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;If a move occure, then:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1 Rule:&lt;/b&gt; Check if the debt_status_customer is paid_full or paid_over, if yes then check if merchant reimbursement is TRUE or FALSE. &lt;br/&gt;
If it is TRUE, do nothing. If it is FALSE, TODO: reimburse and skip rule 2 &amp;amp; 3.&lt;br/&gt;
ELseif the debt_status_customer is not paid_full or paid_over, then check rule 2 &amp;amp; 3.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2 Rule:&lt;/b&gt; If the new due date lies in the past then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, do nothing. If it is FALSE, TODO: reimburse&lt;br/&gt;
&lt;b&gt;3 Rule:&lt;/b&gt; If the new due date lies in the future,then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, TODO: reverse reimbursement. If it is FALSE, do nothing.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt; 



&lt;h3&gt;&lt;a name="MerchantInvoiceProcessafteraMoveofDueDateforInvoiceRealFactoringinAUT%2FDEU"&gt;&lt;/a&gt;Merchant Invoice Process after a Move of Due Date for &lt;ins&gt;Invoice Real Factoring&lt;/ins&gt; in &lt;ins&gt;AUT/DEU&lt;/ins&gt;&lt;/h3&gt;

&lt;div class="panel" style="border-width: 1px;"&gt;&lt;div class="panelContent"&gt;
&lt;p&gt;&lt;b&gt;Merchant reimbursement/reverse disbursement&lt;/b&gt; &lt;/p&gt;


&lt;p&gt;Check if:&lt;br/&gt;
&lt;b&gt;1 Rule:&lt;/b&gt; Check if the debt_status_customer is paid_full or paid_over, if yes then check if merchant reimbursement is TRUE or FALSE. &lt;br/&gt;
If it is TRUE, do nothing. If it is FALSE, TODO: reimburse and skip rule 2 &amp;amp; 3.&lt;br/&gt;
Elseif the debt_status_customer is not paid_full or paid_over, then check rule 2 &amp;amp; 3.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2 Rule:&lt;/b&gt; If the new merchant payoff date lies in the past then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, do nothing. If it is FALSE, TODO: reimburse&lt;br/&gt;
&lt;b&gt;3 Rule:&lt;/b&gt; If the new merchant payoff date lies in the future,then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, TODO: reverse reimbursement. If it is FALSE, do nothing.&lt;/p&gt;



&lt;p&gt;&lt;b&gt;LEGEND&lt;/b&gt;&lt;br/&gt;
merchant payoff date=  d_invoiced + d_invoice_delay + mrcph_payoff_after_days + moving period&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;moving period = new due date - old due date (in days) (eg: move dd by 5 days, than also move mrcph payoff date by 5 days)&lt;/li&gt;
	&lt;li&gt;d_invoiced: date on which we received the invoiceCreated request&lt;/li&gt;
	&lt;li&gt;d_invoice_delay: "delayindays" parameter that we might receive in the invoiceCreated request from the merchant&lt;/li&gt;
	&lt;li&gt;mrcp_payoff_after_days: configurable offset for factoring invoice from portal payment settings used to hold back the payout&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt; 














&lt;h2&gt;&lt;a name="Thefollowingisnotpartofthissprint.Donottakeintoconsiderationfortheestimationmeeting."&gt;&lt;/a&gt;The following is not part of this sprint. Do not take into consideration for the estimation meeting.&lt;/h2&gt;
&lt;h3&gt;&lt;a name="MerchantInvoiceProcessafteraMoveofDueDateforDirectDebitinDEU%28Wedon%27thavedirectdebitinAUTandCHE.%29"&gt;&lt;/a&gt;Merchant Invoice Process after a Move of Due Date for &lt;ins&gt;Direct Debit&lt;/ins&gt; in &lt;ins&gt;DEU&lt;/ins&gt; (We don't have direct debit in AUT and CHE.)&lt;/h3&gt;

&lt;div class="panel" style="border-width: 1px;"&gt;&lt;div class="panelContent"&gt;
&lt;p&gt;&lt;b&gt;Merchant reimbursement/reverse disbursement&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;If a move occure, then:&lt;br/&gt;
&lt;b&gt;1 Rule:&lt;/b&gt; If the new due date lies in the past then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, do nothing. If it is FALSE, TODO: reimburse&lt;br/&gt;
&lt;b&gt;2 Rule:&lt;/b&gt; If the new due date lies in the future,then&lt;br/&gt;
check if merchant reimbursement is TRUE or FALSE. If it is TRUE, TODO: reverse reimbursement. If it is FALSE, do nothing.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;implement rules/logic for merchant reimbursement for 4 differnet "payment methods"&lt;/li&gt;
	&lt;li&gt;update debt_staus_merchant accordingly&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment/>
            <key id="23184">IPL-9303</key>
            <summary>[Main Ticket] Merchant Invoices and Move of Due Date</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10013" iconUrl="https://jira.billpay.intern/images/icons/silk/eye.png">In Revision</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="dnguyen">Duc Hoang Nguyen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jan 2013 15:51:24 +0100</created>
                <updated>Fri, 11 Jan 2013 10:57:38 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="41308" author="jwehrs" created="Mon, 7 Jan 2013 10:45:38 +0100">@Stefan/Duc: pls put spec for all payment methods here and remove from other user stories.</comment>
                    <comment id="41476" author="jwehrs" created="Wed, 9 Jan 2013 20:37:20 +0100">@Stefan/Duc: I think this is wrong or at least incomplete. In the first case you couple the merchant reimbursement/reversed merchant disbursement to the due date of the first rate. In fact this was true until Sprint 42. Now merchant payout and customer due date can deviate. For the merchant payout is only relevant the due date of debt.&lt;br/&gt;
&lt;br/&gt;
We need to clarify this again -&amp;gt; requalified</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                <outwardlinks description="belongs to">
                            <issuelink>
            <issuekey id="21404">IPL-7563</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_10040" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Business Value</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[380]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[merchant invoice]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[8]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-9301] Automatic Matching Improvements</title>
                <link>https://jira.billpay.intern/browse/IPL-9301</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;&lt;b&gt;NOT SPECIFIED&lt;/b&gt;&lt;/p&gt;

&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Introduction&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;Improvements to our automatic matching process&lt;br/&gt;
For improvements to our manual matching see ticket &lt;a href="https://jira.billpay.intern/browse/IPL-9302"&gt;https://jira.billpay.intern/browse/IPL-9302&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Description&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;As-Is-Status&lt;/th&gt;
&lt;th class='confluenceTh'&gt;Should-Be-Status&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt;We have a matching rate of aproximately 84% in total.&lt;/td&gt;
&lt;td class='confluenceTd'&gt;We want to have a matching rate of over 90%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;For 81% (absolute figure of 87275 since documentation in mid November) of all our incomping payments we are using &lt;b&gt;UKTOs&lt;/b&gt; (sub bank accounts) for the automatic matching process.&lt;br/&gt;
We have a 99,45% (86794) sucess rate with these.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;For the remaining 19% (20088) we use &lt;b&gt;"purpose" and "name + payment amount"&lt;/b&gt; matching.&lt;br/&gt;
Here we have an approximated sucess rate of 84%.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;Our aim is to get away from UKTOs, because this is a neck breaker, when integrating new merchants, as these merchants often lack the ability to print a varying bank account number on their invoices (one UKTO for each order at the moment).&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Total amount of unmatched payments I got from Thomas:_1868&lt;br/&gt;
merchant invoices:________________________________312&lt;br/&gt;
immposibble to match:_____________________________966&lt;br/&gt;
remaining amount:________________________________&lt;b&gt;589&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Here is what the customer fills in as purpose of payment (ignoring everything else in the pupose fields)&lt;br/&gt;
01. customer fills in „BPBP" in purpose of payment instead of "BP"&lt;br/&gt;
02. "BP 123456789 1234" ~20 cases&lt;br/&gt;
03. "BP 123456789/1234" few&lt;br/&gt;
04. "BP/123456789/1234" few&lt;br/&gt;
05. "BP 123456789 1234" ~20 cases&lt;br/&gt;
06. "BP/123456789/1234" few&lt;br/&gt;
07. "BP /123456789/1234" few&lt;br/&gt;
08. "BP/ 123456789/1234" few&lt;br/&gt;
09. "BP / 123456789/1234" few&lt;br/&gt;
10. "BP123456789 1234" ~15 cases&lt;br/&gt;
11. "B P123456789/1234" few&lt;br/&gt;
12. "BB123456789/1234" few&lt;br/&gt;
13. "BP1234567891234" ~30 cases&lt;br/&gt;
14. "BPBP123456789/1234/1234" ~30 cases&lt;br/&gt;
15. "BP. 123456789/1234" few&lt;br/&gt;
16. "BP 123456789" ~15 cases&lt;br/&gt;
17. "BP20121018-223533/2438" &lt;b&gt;~200 cases&lt;/b&gt; This one must be investigated. if the hyphen "-" causing the problem?&lt;br/&gt;
18. "EREF+BP123456789SVWZ+123456789/1234" ~20 cases (we should be able to match these now, as the perfect purpose was hidden in one of the following purpose lines)&lt;br/&gt;
19. there are actually quite a lot of cases, which should now be matched, because we use all purpose lines &lt;b&gt;(~100 cases)&lt;/b&gt;. Need report to verify.&lt;br/&gt;
20. customer types in an "O" instead of "0"&lt;br/&gt;
21. customer types in an "9" instead of "P" in "BP"&lt;br/&gt;
22. customer types in an "8" instead of "B" in "BP"&lt;br/&gt;
23. there are a few other typos, but not worth the trouble&lt;/p&gt;

&lt;p&gt;With this list we can add conditions under which our matching process can match additional payments. (Thomas will know what to do)&lt;/p&gt;

&lt;div class="panel" style="border-width: 1px;"&gt;&lt;div class="panelContent"&gt;
&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Note/Additional Information&lt;/b&gt;&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;&lt;b&gt;These are only ideas&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;one static UKTO for each merchant (think this through again, OrderID+lastname+amount)&lt;/li&gt;
	&lt;li&gt;search for a better seperator instead of "/"&lt;/li&gt;
	&lt;li&gt;&lt;a href="https://jira.billpay.intern/browse/IPL-9327"&gt;https://jira.billpay.intern/browse/IPL-9327&lt;/a&gt; Implement automatic transfers for overpaid orders under certain conditions&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;considering the data from above, we need more conditions which allows us to automatically match payments&lt;/li&gt;
	&lt;li&gt;add a report on matching rates (weekly will suffice)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment/>
            <key id="23182">IPL-9301</key>
            <summary>Automatic Matching Improvements</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10013" iconUrl="https://jira.billpay.intern/images/icons/silk/eye.png">In Revision</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="dnguyen">Duc Hoang Nguyen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jan 2013 15:40:22 +0100</created>
                <updated>Fri, 11 Jan 2013 10:17:48 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="41307" author="jwehrs" created="Mon, 7 Jan 2013 10:44:51 +0100">@Duc: what is the status here? Is this fully specified?</comment>
                    <comment id="41379" author="jwehrs" created="Tue, 8 Jan 2013 11:21:52 +0100">&amp;quot;add a template purpose in our docu for future merchants (they shall not use creepy long and difficult purposes)&amp;quot;
&lt;br/&gt;

&lt;br/&gt;
-&amp;gt; this is of course already the case. The problem is that some merchants have very long reference numbers. Sine we are using the merchants&amp;#39; reference numbers to generate the purpose to faciliate the integration (that way they need no external IDs which they would ahve to import into theirs ERP systems) we have to rely on this number. This can lead to unforseen such formats.</comment>
                    <comment id="41433" author="jwehrs" created="Tue, 8 Jan 2013 23:16:53 +0100">for 17) it&amp;#39;s not the hyphen. See &lt;a href="https://admin.billpay.de/OrderDetail.action?orderId=4405284"&gt;https://admin.billpay.de/OrderDetail.action?orderId=4405284&lt;/a&gt;. This is the merchant&amp;#39;s ID.</comment>
                    <comment id="41441" author="dnguyen" created="Wed, 9 Jan 2013 09:57:59 +0100">@Jan for 17) yes I know, but it still wasn&amp;#39;t matched and I want to know why?</comment>
                    <comment id="41453" author="jwehrs" created="Wed, 9 Jan 2013 12:25:39 +0100">ok sorry. that was a misunderstanding. We will check.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_10040" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Business Value</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[990]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[payments]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[3]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-8841] Transactioncredit AUT/DEU: Move due date</title>
                <link>https://jira.billpay.intern/browse/IPL-8841</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;&lt;b&gt;Introduction&lt;/b&gt;&lt;br/&gt;
Right now we allow to move due date portal-wise for all payment methods. But we didn't have a logic for moving due-dates for TC, yet. (also not for TC/DEU)&lt;br/&gt;
So we have to implement a logic for moving due-dates for AUT and DEU. Please remember we collect the rate via direct debit and not via bank transfer like for CHE.&lt;br/&gt;
Please read also &lt;a href="https://jira.billpay.intern/browse/IPL-8374" title="Transactioncredit CHE: Move due date "&gt;IPL-8374&lt;/a&gt; for a better understanding of the whole topic. We should start doing this in AUT and then roll-out to DEU. &lt;/p&gt;


&lt;p&gt;&lt;b&gt;Description&lt;/b&gt;&lt;br/&gt;
Merchant reimbursement/disbursement are the same like for CHE (&lt;a href="https://jira.billpay.intern/browse/IPL-8374" title="Transactioncredit CHE: Move due date "&gt;IPL-8374&lt;/a&gt; &amp;amp; &lt;a href="https://jira.billpay.intern/browse/IPL-9303" title="[Main Ticket] Merchant Invoices and Move of Due Date"&gt;IPL-9303&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Rights Management&lt;/b&gt;&lt;br/&gt;
We only allow for some certain merchants to move the due date after the 1st installment, but maximum till* the 2nd installment. (*till = excluding due date of 2nd installment)&lt;br/&gt;
Important: After the 2nd installment only Admin and CC can do a move due date via BO; and in this case they have to take care of cancelling dunning fees (manually) and possible unpaid rates.&lt;br/&gt;
&lt;b&gt;Customer&lt;/b&gt;&lt;br/&gt;
When moving the due date, we have to update the status of the 1st rate and do some actions. Which action has to take place, is described in the following table by comparing old and new status.&lt;br/&gt;
Important: If rate status is paid full the status remains paid full no matter to where we move the new due date. There never will be a reimbursement of the rate amount ever (only dunning fees can be reimbursed).&lt;/p&gt;

&lt;p&gt;New status will be set by comparing new due dates with the recent date (when the move occurs)&lt;/p&gt;

&lt;p&gt;&lt;img src="https://jira.billpay.intern/secure/attachment/20780/20780_Table_+status_update.png" align="absmiddle" border="0" /&gt;&lt;/p&gt;
&lt;div class="panel" style="border-width: 1px;"&gt;&lt;div class="panelContent"&gt;
&lt;p&gt;&lt;b&gt;CheckCondition&lt;/b&gt;&lt;br/&gt;
If new due date of considered dunning is in the future (condition true), then set respective dunning to "0" and reimburse respective dunning fee too customer. Note: Leave status on paid full.&lt;br/&gt;
If new due date is (still) in the past (condition false), then no status update or reimbursement.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class="panel" style="border-width: 1px;"&gt;&lt;div class="panelContent"&gt;
&lt;p&gt;Example:&lt;br/&gt;
&lt;b&gt;Today is 17.03.2012&lt;/b&gt;&lt;br/&gt;
Old due date of the first rate is 1.3.2012, old due date of dunning 1 is 10.03.2012 and old due date of dunning 2 is 15.03.2012. Rate status is paid full and dunning fee 1 and dunning fee 2 exist.&lt;br/&gt;
Now and move due date of 3 days occurs.&lt;br/&gt;
New due date of the rate is 4.3.2012, new due date of dunning 1 is 13.03.2012 and new due date of dunning 2 is 18.03.2012.&lt;br/&gt;
So due date of dunning 2 is in the future: so condition is: true , do set dunning fee to 0 and reimburse dunning fee 2. Dunning fee 1 is in the past: so condition is false. Do nothing. Note: Status always remains paid full.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Special case:&lt;/b&gt;&lt;br/&gt;
If Admin or CC move due date after 2nd installment, then CC have to check if all installments which are in the past are paid full, otherwise they shouldn't do a move due date. If they move the due date, all rates from the past stays on paid full. All future rates stay on created. CC has to check each rate and cancel all dunning fees manually if necessary.&lt;/p&gt;

&lt;p&gt;Note: Please check if a moved paid full rate is not charged again, when due date is reached (again)&lt;/p&gt;





&lt;p&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/p&gt;

&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;shift/move due dates all rates&lt;/li&gt;
	&lt;li&gt;create canceling of dunning fees - logic&lt;/li&gt;
	&lt;li&gt;check if merchant reimbursement works as for CHE&lt;/li&gt;
	&lt;li&gt;provide rights management&lt;/li&gt;
	&lt;li&gt;provide error message&lt;/li&gt;
	&lt;li&gt;provide BO design&lt;/li&gt;
	&lt;li&gt;provide reimbursement logic and CheckCondition&lt;/li&gt;
	&lt;li&gt;provide update sub_debt status logic&lt;/li&gt;
	&lt;li&gt;provide special case&lt;/li&gt;
&lt;/ul&gt;


</description>
                <environment/>
            <key id="22715">IPL-8841</key>
            <summary>Transactioncredit AUT/DEU: Move due date</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10014" iconUrl="https://jira.billpay.intern/images/icons/silk/thumb_up.png">Specified</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="skuhn">Stefan Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Nov 2012 16:00:38 +0100</created>
                <updated>Tue, 8 Jan 2013 16:53:25 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="41129" author="skuhn" created="Fri, 21 Dec 2012 15:57:53 +0100">Testing: Check if we don&amp;#39;t charge moved paid full rates (direct debit) again.</comment>
                    <comment id="41272" author="jwehrs" created="Thu, 3 Jan 2013 20:06:25 +0100">Was communicated to Esprit to be released by beginning to mid of february.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                <outwardlinks description="belongs to">
                            <issuelink>
            <issuekey id="21882">IPL-8028</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="20306" name="99_duedate_shift_confirmation_aut_deu_tc_23_11_2012.docx" size="15044" author="dnguyen" created="Fri, 23 Nov 2012 10:38:15 +0100"/>
                    <attachment id="20825" name="move due date BO.jpg" size="210350" author="skuhn" created="Fri, 7 Dec 2012 17:01:38 +0100"/>
                    <attachment id="20780" name="Table_ status_update.png" size="22989" author="skuhn" created="Thu, 6 Dec 2012 15:55:58 +0100"/>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                                                        <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[8]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-8840] Check for Unpaid Installments/Rates for TC orders</title>
                <link>https://jira.billpay.intern/browse/IPL-8840</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Introduction&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;We have to generate 2 new DWH-reports to solve a "known bug" for transaction credit for TC/DEU and TC/AUT. For TC/CHE we do allocation and we don't need this reports.&lt;br/&gt;
Known bug is: When the customer didn't pay a single rate and we cannot go to open payment or debt collection (after dunning 2), because the debt doesn't pass this "2 consecutive unpaid rates and more than 10% of the whole debt is unpaid" condition. So we never charge this unpaid rate again and the whole debt stuck in a "dead end". &lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;Furthermore we have to find out about some strange cases, were we have single rates, which are in directDebit_pending in the middle of the installment plan.&lt;/li&gt;
	&lt;li&gt;We also have to extend our debt status update process when it comes to a reverse direct debit. (only last installment?)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So this user story contains 3 parts: (which are related)&lt;br/&gt;
At a glance:&lt;br/&gt;
1) First we generate a report on which CC send those debts to total discharge manually. With a second report, we fetch all still unpaid debts (after discharge) and send them manually to inkasso and update the status of the debt.&lt;br/&gt;
2) Find out strange cases.(see research)&lt;br/&gt;
3) Adjust update process for the debt in reverse direct debit cases.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;1. Description/Unpaid Rates&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;As-Is-Status&lt;/th&gt;
&lt;th class='confluenceTh'&gt;Should-Be-Status&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt;We don't check for single unpaid rates and the debt remains in a "dead end"&lt;/td&gt;
&lt;td class='confluenceTd'&gt;We indentifiy not completly paid TCs and proceed them&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;&lt;b&gt;1 DWH-report&lt;/b&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt; &lt;b&gt;Selected Content&lt;/b&gt; 
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;Status of the last installment is: dunning 2 &lt;b&gt;or&lt;/b&gt; paid_full&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;AND&lt;/b&gt; at least one installment is in dunning_2 state&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;&lt;b&gt;Processing after 1st DWH-report&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;Based on this new report, CC will check these debts and manually execute total_discharge in order to charge the unpaid rate(s) again.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Note: total_discharge fetches all open payments and put an extra interest on old unpaid rates and send an e-mail to the customer.&lt;/p&gt;

&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;&lt;b&gt;2nd DWH-report&lt;/b&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt; &lt;b&gt;Selected Content&lt;/b&gt; 
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;In the "table ipaylater_customer.order_hire_purchase_detail" the "ohpd_total_discharge_end_date timestamp without timezone" is reached.&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;AND&lt;/b&gt; all rates are in the past (due)&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;&lt;b&gt;Processing after 2nd DWH-report&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;Based on this report, Risk will check this debts and send them manually to debt collection. (Inkasso)&lt;/li&gt;
	&lt;li&gt;And we set this debts manually to INKASSO_PENDING. (weekly?)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;2. Description/Research&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;As-Is-Status&lt;/th&gt;
&lt;th class='confluenceTh'&gt;Should-Be-Status&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt;Single rates are in dd_pending &lt;/td&gt;
&lt;td class='confluenceTd'&gt;Find out what happens/solve the bug?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;Right now we have several debts, where one rate (in the middle) of the installment plan is directdebit_pending. We have to find out why?!&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;3. Description/Status Update&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;As-Is-Status&lt;/th&gt;
&lt;th class='confluenceTh'&gt;Should-Be-Status&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt;We don't update debt status when a reverse direct debit occurs &lt;/td&gt;
&lt;td class='confluenceTd'&gt;Update debt status when a reverse direct debit occurs&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;Right now we update the debt satus to paid_full when we have (succecfully?) charged the last installment via direct debit.&lt;br/&gt;
-&amp;gt; Then a reverse direct debit occurs (can happen up to 6 weeks after our direct debit). -&amp;gt;  Then we don't update the status of the debt to "TRANSACTION_CREDIT_COLLECTION_IN_PROGRESS" again, as we should.&lt;br/&gt;
(we only update the sub_debt status)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;adjust template (total_discharge) AUT/DEU (DUC)&lt;/li&gt;
	&lt;li&gt;create two new DHW reports for CC and Risk (IT?)&lt;/li&gt;
	&lt;li&gt;research why we have single rates in dd_pending&lt;/li&gt;
	&lt;li&gt;create/adjust debt update process (check_status?)&lt;/li&gt;
	&lt;li&gt;implement schedule for weekly manual update process (INKASSO_PENDING)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment/>
            <key id="22714">IPL-8840</key>
            <summary>Check for Unpaid Installments/Rates for TC orders</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="10013" iconUrl="https://jira.billpay.intern/images/icons/silk/eye.png">In Revision</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="dnguyen">Duc Hoang Nguyen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Nov 2012 15:35:52 +0100</created>
                <updated>Wed, 9 Jan 2013 11:51:16 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                                                                                  <comments>
                    <comment id="40182" author="skuhn" created="Mon, 26 Nov 2012 15:52:16 +0100">Old description
&lt;br/&gt;

&lt;br/&gt;
We need to implement a check at the end of an installment plan to claim possibly unpaid rates.
&lt;br/&gt;

&lt;br/&gt;
Example:
&lt;br/&gt;

&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Transaction Credit in Germany.
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;We try to direct debit the first rate, but bank account is not covered =&amp;gt; dunning 1
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;We try to direct debit the first rate + dunning fee 1, but bank account is not covered =&amp;gt; dunning 2
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Customer is requested to pay first rate + dunning fee 1 + dunning fee 2, but does not pay =&amp;gt; only one rate is unpaid and this one is under 10% of full payment amount, hence we go on to second rate
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;we try to direct debit the second rate and it is successfull
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;we try to direct debit all following rates and all are successfull =&amp;gt; the first rate is never claimed again
&lt;br/&gt;

&lt;br/&gt;
This could happen to any rate, as long as the due amount is under 10% of the full payment amount and two successive rates are not due.
&lt;br/&gt;
That&amp;#39;s why we need a check at the end of every rate plan, which compares the full payment amnount to the sum of all money received.
&lt;br/&gt;

&lt;br/&gt;
If there are unpaid amounts, set status to &amp;quot;open payments&amp;quot; (same process as if the customer does fullfil the requirements) and send out the open payment e-mail, which gives the customer 14 days to pay all unpaid amounts, otherwise we forward this receivable to debt collection (same consequences as if the customer runs through the standard process).
&lt;br/&gt;

&lt;br/&gt;
Furthermore, we should implement a goodwill of 50 Cents. if the reamining amount is less than 0,50€ then don&amp;#39;t trigger this process. Anything greater than 0,50€ is going through this process (open payments, debt collection)</comment>
                    <comment id="41416" author="jwehrs" created="Tue, 8 Jan 2013 17:14:07 +0100">1) RLS nach PAID_FULL -&amp;gt; Status &amp;#xE4;ndern
&lt;br/&gt;
2) Rate bleibt auf DD_PENDING -&amp;gt; muss rausgefunden werden
&lt;br/&gt;
3) Rate bleibt auf DUNNING_2 -&amp;gt; description</comment>
                </comments>
                    <attachments>
                    <attachment id="21390" name="99_total_discharge_ticket_8840_tc_aut_deu_08.01.2013.docx" size="18244" author="dnguyen" created="Tue, 8 Jan 2013 16:33:19 +0100"/>
                </attachments>
            <subtasks>
            <subtask id="22337">IPL-8475</subtask>
            <subtask id="22441">IPL-8579</subtask>
        </subtasks>
                <customfields>
                                <customfield id="customfield_10040" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Business Value</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[380]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[payments]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[5]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-8815] Charge disagio depending on customer status</title>
                <link>https://jira.billpay.intern/browse/IPL-8815</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;IS:&lt;br/&gt;
Only one value for basic fee/cancelation fee/minimum fee/disagio can be provided per portal/country/currency/payment method. Customer status is not considered.&lt;/p&gt;

&lt;p&gt;SHOULD BE:&lt;br/&gt;
We want to be able to charge different disagios/basic fees/cancelation fees/minimum fees for whitelisted and not-whitelisted customers. Whitelist status is determined by the prevalidation state. To provide a generic solution we will make providable one value per relevant prevalidation state and portal/country/currency/payment method. Therefore we need to adjust the Backoffice GUI and the merchant invoicing.&lt;/p&gt;

&lt;p&gt;We must provide default values for everythin but disagio (i.e. the Sales administrator will have to fill in only the disagio). &lt;/p&gt;

&lt;p&gt;Default values are:&lt;br/&gt;
Stornogebühr 1,50€ / 2,50CHF&lt;br/&gt;
Mindestgebühr 1,50€ / 2,50CHF&lt;br/&gt;
Grundgebühr 1,50€ / 2,50CHF&lt;/p&gt;

&lt;p&gt;For disagio we don't have default values&lt;/p&gt;</description>
                <environment/>
            <key id="22689">IPL-8815</key>
            <summary>Charge disagio depending on customer status</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10014" iconUrl="https://jira.billpay.intern/images/icons/silk/thumb_up.png">Specified</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jwehrs">Jan Wehrs</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Nov 2012 10:13:31 +0100</created>
                <updated>Thu, 10 Jan 2013 12:10:28 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="39858" author="jwehrs" created="Tue, 20 Nov 2012 10:21:31 +0100">For the current pre validation states we must be able to charge different disagios:
&lt;br/&gt;

&lt;br/&gt;
APPROVED_MERCHANT_CUSTOMER_LIMIT -&amp;gt; all orders for customers where the customer is approved by the merchant (portal must be enabled in our system)
&lt;br/&gt;
APPROVED_ORDER_IMPORT -&amp;gt; curently only Ideal, CSV import, no credit check done
&lt;br/&gt;
APPROVED_CUSTOMER_WHITELISTED -&amp;gt; all orders for which a hit on the customer whitlist appeared
&lt;br/&gt;
APPROVED_KNOWN_GOOD_CUSTOMER -&amp;gt; all orders for which we already know the customer and where the credit information in our system is sufficient
&lt;br/&gt;
APPROVED -&amp;gt; all others</comment>
                    <comment id="39861" author="jwehrs" created="Tue, 20 Nov 2012 10:22:37 +0100">@Sven: we should make this as flexible as possible. I would suggest to allow charging a disagio based on the prevalidation status (see comment above).</comment>
                    <comment id="40213" author="adyck" created="Tue, 27 Nov 2012 11:11:41 +0100">Laut Vertr&amp;#xE4;gen mit den Apotheken ist die Trennung zwischen Neu-/Bestandskunden durch den Kommentar von Jan bereits abgedeckt. Ein Bestandskunde im Sinne der Vertr&amp;#xE4;ge ist nur ein solcher, wenn er von den H&amp;#xE4;ndlern an uns geliefert wird. </comment>
                    <comment id="40757" author="skuhn" created="Mon, 10 Dec 2012 18:01:12 +0100">Screenshot is just a first draft</comment>
                    <comment id="41268" author="jwehrs" created="Thu, 3 Jan 2013 18:04:29 +0100">@Duc: please check if customizable disagio is sufficient or if we need more customizable parameters.</comment>
                    <comment id="41310" author="jwehrs" created="Mon, 7 Jan 2013 10:48:34 +0100">@Sven/Duc: pls comment on this.</comment>
                    <comment id="41311" author="dnguyen" created="Mon, 7 Jan 2013 10:52:16 +0100">We also want Grundgeb&amp;#xFC;hr, Stornogeb&amp;#xFC;hr and Mindestgeb&amp;#xFC;hr (baseic fee, cancelation fee and minimum fee) to be adjustable</comment>
                    <comment id="41325" author="smoghaddam" created="Mon, 7 Jan 2013 16:11:05 +0100">Important to know is, that customizable fields are valid for a specific shop and its customers and not for all. Applicable to each payment method and country.</comment>
                    <comment id="41330" author="jwehrs" created="Mon, 7 Jan 2013 20:11:30 +0100">Needs to be re estimated because requirements changed.</comment>
                    <comment id="41457" author="skuhn" created="Wed, 9 Jan 2013 16:12:30 +0100">Do we need a new user story for adapting of the merchant invoice because of this? </comment>
                    <comment id="41461" author="adyck" created="Wed, 9 Jan 2013 16:50:32 +0100">To check, customer is on Whitelist. Actual Limit e.g. 150€, but his shopping cart is above. 
&lt;br/&gt;
Is prestate still &amp;quot;APPROVED_CUSTOMER_WHITELISTED&amp;quot; ???</comment>
                    <comment id="41463" author="smoghaddam" created="Wed, 9 Jan 2013 17:35:45 +0100">whitelisted is portal-based only! we get the customer portfolio of the merchant with all the whitelisted customers who can get better conditions.So the states we need are approved_merchant_customer_whitelist and approved_new_customer
&lt;br/&gt;

&lt;br/&gt;
the merchant invoice needs to be expanded by the additional states. for the merchant invoice we adapt the code including the two states.
&lt;br/&gt;
it must be broken down by the positions disagio, storno, mindestgeb&amp;#xFC;hr und grundgeb&amp;#xFC;hr and to each approved merchant customer whitelist AND new customer (=approved_new_customer). for the merchant invoice we can use &amp;quot;existing customer&amp;quot;=approved_merchant_customer_whitelist and &amp;quot;new customer&amp;quot;=approved_new_customer. the terms may be re-define by product.</comment>
                </comments>
                    <attachments>
                    <attachment id="21412" name="IPL8815Disagio.png" size="118347" author="smoghaddam" created="Wed, 9 Jan 2013 21:54:07 +0100"/>
                    <attachment id="21411" name="IPL8815Grundgeb.png" size="116948" author="smoghaddam" created="Wed, 9 Jan 2013 21:54:07 +0100"/>
                    <attachment id="21410" name="IPL8815Mindestgeb.png" size="110429" author="smoghaddam" created="Wed, 9 Jan 2013 21:54:07 +0100"/>
                    <attachment id="21409" name="IPL8815Stornogeb.png" size="118603" author="smoghaddam" created="Wed, 9 Jan 2013 21:54:07 +0100"/>
                    <attachment id="21338" name="IPL8815Übersicht.png" size="56048" author="smoghaddam" created="Mon, 7 Jan 2013 16:05:22 +0100"/>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                                    <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[payments]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[13]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-8781] Backoffice and Merchant Service - backend cleanup.</title>
                <link>https://jira.billpay.intern/browse/IPL-8781</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>


&lt;p&gt;Currently in the Backoffice and Merchant Service backend projects we have a lot of not used classes, methods and other dependencies that are just complicating the project dependencies, occupying space, consuming memory, etc.&lt;br/&gt;
We should clean and remove all those unnecessary dependencies, so that we can simplify the project dependencies.&lt;/p&gt;

&lt;p&gt;Useful tips:&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;Use sonar (sonar.billpay.intern) to identify unused methods and classes;&lt;/li&gt;
	&lt;li&gt;Consider Eclipse warnings to identify unused code;&lt;/li&gt;
	&lt;li&gt;Eclipse reference option over classes, methods and variables. Right Click over selected method and References &amp;gt;&amp;gt; Workspace (Ctrl + Shift + G)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Additionally we should find all Interface implementations and changed the protected/package protected members to private. That way the code is clean and unused and unnecessary dependencies can be detected and after removed.&lt;/p&gt;

&lt;p&gt;Don't forget that also the unused imports in the classes are creating unnecessary dependencies and should be removed.&lt;/p&gt;

&lt;p&gt;This will allow to find unused stored procedures and unused interface methods.&lt;/p&gt;

&lt;p&gt;Examples of things to throw out.&lt;br/&gt;
net.ipaylater.backend.deltavistav2.client&lt;/p&gt;

&lt;h2&gt;&lt;a name="eastmationwithoutanyrefactoring%21%21%21"&gt;&lt;/a&gt;eastmation without any refactoring !!!&lt;/h2&gt;</description>
                <environment/>
            <key id="22655">IPL-8781</key>
            <summary>Backoffice and Merchant Service - backend cleanup.</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10014" iconUrl="https://jira.billpay.intern/images/icons/silk/thumb_up.png">Specified</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="wmlynarski">Wieslaw Mlynarski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Nov 2012 10:28:47 +0100</created>
                <updated>Thu, 10 Jan 2013 11:45:47 +0100</updated>
                                    <version>38. Sprint</version>
                                <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                <component>application - backoffice</component>
                <component>IT improvement</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="57600">2 days</timeoriginalestimate>
                    <timeestimate seconds="57600">2 days</timeestimate>
                                  <aggregatetimeoriginalestimate seconds="144000">1 week</aggregatetimeoriginalestimate>
                        <aggregatetimeremainingestimate seconds="144000">1 week</aggregatetimeremainingestimate>
                                              <attachments>
                </attachments>
            <subtasks>
            <subtask id="23266">IPL-9385</subtask>
            <subtask id="23267">IPL-9386</subtask>
            <subtask id="23268">IPL-9387</subtask>
            <subtask id="23269">IPL-9388</subtask>
        </subtasks>
                <customfields>
                                                    <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[other]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[3]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-8287] reclaim VAT from merchant</title>
                <link>https://jira.billpay.intern/browse/IPL-8287</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Note: This is not the final version!!!!!&lt;/p&gt;

&lt;h1&gt;&lt;a name="Introduction"&gt;&lt;/a&gt;Introduction&lt;/h1&gt;
&lt;p&gt;We want to charge the merchant the sales tax from outstanding (not collectable) debits which we get back from our inkasso partners. We want the merchants to do the sales tax payback with the Finanzamt, because we don't have the invoices to do that ourself. (Which are needed for doing that) So we have to adapt the merchant invoice for the reclaim.&lt;br/&gt;
There has been several Jira tickets (&lt;a href="https://jira.billpay.intern/browse/IPL-4582" title="Abrechnung der Umsatzsteuer bei Forderungsausfällen"&gt;&lt;del&gt;IPL-4582&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href="https://jira.billpay.intern/browse/IPL-5875" title="Upload von Lastschrift-Forderungen im Bulk tool für Umsatzsteuerrückforderungen nicht möglich"&gt;IPL-5875&lt;/a&gt;) to solve this problem in march 12, but they were incomplete and buggy . So we have to redo this issue. Please check if you could use any code from those functions in order to safe time.&lt;/p&gt;

&lt;p&gt;Note: We do this in the first step only for german orders (DEU + EUR). Furthermore only for invoice and direct debit NOT for hire purchase / transaction credit. For Switzerland and Austria we'll make separate user stories, because there will be different condition for doing so. &lt;/p&gt;

&lt;p&gt;We have to consider 4 main areas for this task.&lt;/p&gt;
&lt;h1&gt;&lt;a name="BulkTool%26originofdata"&gt;&lt;/a&gt;Bulk-Tool &amp;amp; origin of data&lt;/h1&gt;
&lt;p&gt;We have an "automated" import from our inkasso partners KSP and Ideal already and we have to check there if we get the VAT information there. If yes -&amp;gt; fine.  If no -&amp;gt; we should get this info from Risk.&lt;br/&gt;
For HIT and CEG we should also do this auto-import. (for HIT we already working on that) Still, we need the possiblity to do this manually (bulk-tool)&lt;/p&gt;

&lt;p&gt;Conditions for uploading via bulk tool:&lt;br/&gt;
Followings conditions has to be checked by uploading debts-ids with the bulk-tool.&lt;br/&gt;
Condition 0:&lt;br/&gt;
is the given ID an valid debt_id (not main_order_id)&lt;br/&gt;
Condition 1:&lt;br/&gt;
Duplicate check: We have to check if this debts-id was uploaded before and has been reclaimed (debt_transaction lines exists)&lt;br/&gt;
Condition 2:&lt;br/&gt;
Do not allow debts witch have Transaction lines of following types (customer payments): Incoming transfer No 1; Reported incoming transfer No  12; Inkasso incoming transfer No 17&lt;br/&gt;
Condition 3:&lt;br/&gt;
Do not allow debts with customer_debt_status in: 3,4,5,6&lt;br/&gt;
&lt;b&gt;TODO:&lt;/b&gt; clarify status 11? and 14? (has to be checked) (Ipaylater_dept_status_customer)&lt;br/&gt;
Condition 4:&lt;br/&gt;
Only invoice and direct debit debts NOT hire purchase (transaction credit) - payment_method 1+2&lt;br/&gt;
Condition 5:&lt;br/&gt;
based on country / currency: only DEU + EUR&lt;/p&gt;

&lt;p&gt;&lt;b&gt;result:&lt;/b&gt; know list of debts for which we try to calculate the VAT reclaim&lt;/p&gt;

&lt;h1&gt;&lt;a name="calculationofVATreclaim"&gt;&lt;/a&gt;calculation of VAT reclaim&lt;/h1&gt;

&lt;p&gt;This is about to decide what to relaim. AS we dont have the tax percentage per cart item, we have to guess / calculate the tax per&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;cart-item&lt;/li&gt;
	&lt;li&gt;shipping-costs&lt;/li&gt;
	&lt;li&gt;rebates&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;for each item in (cart,shipping,rebate) do&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;calculate tax via: cart_article_brutto minus cart_article_netto = sales tax amount&lt;br/&gt;
if sales_tax_amount is 7% (+-1%) of item_brutto then consider, e.g. add to VAT-reclaim 7%&lt;br/&gt;
if sales_tax_amount is 19% (+-1%) of item_brutto then consider, e.g. add to VAT-reclaim 19%&lt;br/&gt;
if sales_tax_amount is something else, skip it &lt;img class="emoticon" src="https://jira.billpay.intern/images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Tolerance for the sales tax rates is +-1%. We have deviant rates due to mixed cart content and incorrect data we got from our merchants. &lt;br/&gt;
Note: We have to think about a strategy what we're gonna do with that kind of debts, because these are approx. 30% and we don't wanna lose that money in the long run. We have to claim that debts also somehow.  &lt;/p&gt;

&lt;p&gt;Debts with discounts (Rabatt) has only be considered when calculated tax do correspond to the average tax rate??????&lt;/p&gt;

&lt;p&gt;&lt;b&gt;TODO:&lt;/b&gt; clarify with Finance what to do with mixed carts and rebate without tax&lt;/p&gt;

&lt;p&gt;&lt;b&gt;result:&lt;/b&gt; Add new lines + values to the debt_transaction in the DB / BO payment history. (Order view)&lt;/p&gt;

&lt;h1&gt;&lt;a name="Merchantinvoice"&gt;&lt;/a&gt;Merchant invoice&lt;/h1&gt;
&lt;p&gt;There are 2 attachments: Please adapt the merchant invoice due to those examples.&lt;br/&gt;
In the Excel sheet you can find new positions in the tab "Anlage Ankauf" (debt_transactions). New is the position "Umsatzsteuerrückforderung 19%" (transaction_type 16) and " Umsatzsteuerrückforderung 7%" (transaction_type 15). There are 2 positions because there are 2 different tax rates in Germany. They end up on Label Type G and have to be negative in the merchant_invoice PDF. (&lt;a href="https://wiki.billpay.intern/x/24AN"&gt;https://wiki.billpay.intern/x/24AN&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;This amount has to be listed in the column "Forderungsbetrag" (amount of debit) and has to be negative.  Note: For this positions the field in the column "Betrag in €" has to be empty. (similar to cancellation fee but the other way around)&lt;/p&gt;

&lt;p&gt;en: VAT reclaim 7% (type 15)&lt;br/&gt;
en: VAT reclaim 19% (type 16)&lt;br/&gt;
de: Umsatzsteuerrückforderung 7%&lt;br/&gt;
de: Umsatzsteuerrückforderung 19%&lt;/p&gt;

&lt;p&gt;Basically there are 2 steps for bringing these new positions to the merchant invoice.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Step&lt;br/&gt;
Collect these new lines and attach to correct label (merchant_invoice part1)&lt;/li&gt;
	&lt;li&gt;Step&lt;br/&gt;
Put lines to the merchant invoice and sum them up correctly&lt;br/&gt;
(Note: we have to make these amounts negative in the invoice on the G-label side)&lt;br/&gt;
Note: These positions have to be listed per debt, possibly two lines (7% or / and 19% reclaim)&lt;/li&gt;
&lt;/ol&gt;




&lt;h1&gt;&lt;a name="DataWareHouseDWHReports"&gt;&lt;/a&gt;Data-Ware-House DWH Reports&lt;/h1&gt;

&lt;p&gt;We have to create a DWH report to check the final merchant invoice regarding the VAT reclaim.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;TODO:&lt;/b&gt; define rules with finance&lt;/p&gt;

&lt;p&gt;Points which have to be considered.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;VAT exists&lt;/li&gt;
	&lt;li&gt;compare the values (DWH values = merchant invoice values) per debt
	&lt;ul&gt;
		&lt;li&gt;number lines of VAT reclaim are equal&lt;/li&gt;
		&lt;li&gt;calculation of tax is correct&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


</description>
                <environment/>
            <key id="22142">IPL-8287</key>
            <summary>reclaim VAT from merchant</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="3" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_green.png">3 (Wichtig)</priority>
                    <status id="10013" iconUrl="https://jira.billpay.intern/images/icons/silk/eye.png">In Revision</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="skuhn">Stefan Kuhn</assignee>
                                <reporter username="mkleemann">Maren Kleemann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Oct 2012 11:30:54 +0200</created>
                <updated>Thu, 10 Jan 2013 15:05:08 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - background</component>
                        <due/>
                    <votes>0</votes>
                                                    <comments>
                    <comment id="38848" author="dpaufler" created="Tue, 16 Oct 2012 17:22:14 +0200">Implementierung der USt-R&amp;#xFC;ckforderung in der H&amp;#xE4;ndlerabrechnung
&lt;br/&gt;

&lt;br/&gt;
Lt. unseren AGB&amp;#39;s k&amp;#xF6;nnen wir die Umsatzsteuer bei ausgefallenen 
&lt;br/&gt;
Forderungen gegen&amp;#xFC;ber unseren H&amp;#xE4;ndlern geltend machen. Dies soll in die 
&lt;br/&gt;
H&amp;#xE4;ndlerabrechnung integriert werden (siehe &lt;a href="https://jira.billpay.intern/browse/IPL-4582" title="Abrechnung der Umsatzsteuer bei Forderungsausfällen"&gt;&lt;strike&gt;IPL-4582&lt;/strike&gt;&lt;/a&gt; 
&lt;br/&gt;
&amp;lt;&lt;a href="https://jira.billpay.intern/browse/IPL-4582&amp;gt;)"&gt;https://jira.billpay.intern/browse/IPL-4582&amp;amp;gt;)&lt;/a&gt;. Im April 2012 wurde dies 
&lt;br/&gt;
bereits implementiert mit dem Bug, dass der Bestellwert dem H&amp;#xE4;ndler 
&lt;br/&gt;
gutgeschrieben wurde (siehe Anlage).
&lt;br/&gt;
To Do:
&lt;br/&gt;
1) Es soll eine seperate Anlage erstellt werden, die alle releventen 
&lt;br/&gt;
Informationen beeinhaltet (siehe Muster). Nur der Ust-Betrag darf in 
&lt;br/&gt;
Abzug gebracht werden. Bei deutschen H&amp;#xE4;ndler darf der 
&lt;br/&gt;
R&amp;#xFC;ckforderungsbetrag nicht noch einmal der Ust unterliegen.
&lt;br/&gt;
2) Im Bulk-Tool m&amp;#xFC;ssen auch Lastschriften hochgeladen werden. Dies ist 
&lt;br/&gt;
momentan noch nicht m&amp;#xF6;glich (&lt;a href="https://jira.billpay.intern/browse/IPL-5875" title="Upload von Lastschrift-Forderungen im Bulk tool für Umsatzsteuerrückforderungen nicht möglich"&gt;IPL-5875&lt;/a&gt; 
&lt;br/&gt;
&amp;lt;&lt;a href="https://jira.billpay.intern/browse/IPL-5875&amp;gt;)"&gt;https://jira.billpay.intern/browse/IPL-5875&amp;amp;gt;)&lt;/a&gt;
&lt;br/&gt;
3) Es d&amp;#xFC;rfen nur Forderungen hochgeladen werden, die folgende 
&lt;br/&gt;
Bedingungen erf&amp;#xFC;llen:
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;a) Zahlarten: Rechnungskauf und Lastschrift
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;b) Kundenmarkt: Deutschland
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c) Die berechnete Umsatzsteuer darf nur um 1% von 7% bzw. 19% 
&lt;br/&gt;
abweichen. Bei gemischten Warenk&amp;#xF6;rben m&amp;#xFC;ssen die Steuern seperat 
&lt;br/&gt;
ausgewiesen werden.
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;d) Der Status der Forderungen darf nicht &amp;quot;cancelled&amp;quot;, &amp;quot;paid full&amp;quot; 
&lt;br/&gt;
und nicht &amp;quot;paid over&amp;quot; sein.
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e) Forderungen d&amp;#xFC;rfen nur einmal hochgeladen werden k&amp;#xF6;nnen. 
&lt;br/&gt;
Dublikate m&amp;#xFC;ssen vermieden werden.
&lt;br/&gt;
Freundliche Gr&amp;#xFC;&amp;#xDF;e
&lt;br/&gt;
Maren</comment>
                    <comment id="38850" author="mkleemann" created="Tue, 16 Oct 2012 18:06:20 +0200">example of merchant invoice attached</comment>
                    <comment id="38918" author="mkleemann" created="Thu, 18 Oct 2012 19:44:15 +0200">Bulk-Tool &amp;amp; origin of data:
&lt;br/&gt;
1) If we manage to have an automatic import from our inkasso partners, there should be just debts considered with a negative outcome (debts that are not paid by customers, debts that we can write off). Sometimes the payments from debt collection companies are delayed. We need to be careful, that we don&amp;#39;t claim VAT on these debts. The savest way is to upload debts in the bulk tool.
&lt;br/&gt;
2) Don&amp;#39;t allow debts with customer status 11+14
&lt;br/&gt;

&lt;br/&gt;
Calculation of VAT-claim: 
&lt;br/&gt;
1) mixed carts: Calculate the tax of each article . We need to show the sum for 7% tax and 19% tax in the merchant invoice.
&lt;br/&gt;
2) rebate+shipping fees: If no tax amount is given, we assume that the amount shown is after tax. The tax %age must correspond to the tax that we calculate for the cart. We skip debts that have a mixed cart and the VAT of rebate/ shipping fees is not clearly shown or is incomprehensible. For rebate and shipping fees the rule applies that they must have the same tax than the cart (+/-1%)</comment>
                    <comment id="38927" author="mkleemann" created="Fri, 19 Oct 2012 10:03:41 +0200">Bulk-Tool &amp;amp; origin of data: 
&lt;br/&gt;
3) Please exclude debts that have the factor status &amp;quot; Full sale done&amp;quot; and &amp;quot;Factor closed&amp;quot;. We&amp;#39;ve already sold these debts to Coface. So we are not allowed to reclaim VAT on these ones.
&lt;br/&gt;

&lt;br/&gt;
Data-Ware-House DWH Reports
&lt;br/&gt;
1) In the merchant invoice CSV export, that already exists, the type 15 &amp;quot;VAT reclaim 7%&amp;quot; and type 16 &amp;quot;VAT reclaim 19% &amp;quot;must be clearly shown.
&lt;br/&gt;
2) We need 2 further reports to check the correct billing for VAT reclaim. It already exists the &amp;quot; cartreport&amp;quot; that shows most of the information that we need (please ask Daniel). An example is attached. That can be the basis for the 2 reports:
&lt;br/&gt;
&amp;nbsp;a) Cartreport with all articles listed. This report should include:
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- customer-, merchant- and factor status
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- VAT %age of cart, rebate, shipping fees and articles
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Merchant invoice label
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Merchant name and ID
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- if possible the name of our inkasso partner
&lt;br/&gt;
We also can use this report for giving merchants information about the calculation of the VAT reclaim. 
&lt;br/&gt;
b) Same as above, but the sum of all articles per debt should be stated. Also the VAT reclaim must be included. This report will be used to validate the data in the merchant invoice.
&lt;br/&gt;
</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                                <inwardlinks description="belongs">
                            <issuelink>
            <issuekey id="19741">IPL-5986</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="18702" name="fehlerhafte Darstellung der Rückforderung in der Abrechnung.pdf" size="370144" author="mkleemann" created="Thu, 11 Oct 2012 11:30:54 +0200"/>
                    <attachment id="18814" name="Merchant invoice-Example_VAT_new.xlsx" size="1206955" author="mkleemann" created="Tue, 16 Oct 2012 18:06:20 +0200"/>
                    <attachment id="18882" name="VAT_reclaim_check_cartreport.xlsx" size="14671" author="mkleemann" created="Fri, 19 Oct 2012 10:05:36 +0200"/>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_10040" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Business Value</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[150]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[merchant invoice]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[8]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>

<item>
            <title>[IPL-4819] web.xml distributable in backoffice</title>
                <link>https://jira.billpay.intern/browse/IPL-4819</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;p&gt;Add &amp;lt;distributable /&amp;gt; to web.xml to make backoffice session-failover &lt;/p&gt;

&lt;p&gt;make sure, that all session-objects are serializeable.&lt;/p&gt;

&lt;p&gt;After clarification with Daniel: &lt;br/&gt;
Problem of users logging out from BO doesn't have to be connected to session redistribution. There are probably at least 2 or 3 different problems with logging out:&lt;br/&gt;
1. User gets logout before 60m of idle time - this is not necessary connected to the load balancing since according to datacenter logs the witch is done rarely &lt;span class="error"&gt;&amp;#91;eg. few times a day&amp;#93;&lt;/span&gt; /can be connected to spring security/&lt;br/&gt;
2. User sees login page but is actually not loggedout, so when going directly to different page in BO user doesn't have to log in again &lt;br/&gt;
3. User sees login page in popup of BO &lt;span class="error"&gt;&amp;#91;probably connected to pt.2&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;a href="http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html"&gt;http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html&lt;/a&gt;&lt;br/&gt;
&lt;a href="http://wiki.metawerx.net/wiki/Web.xml.Distributable"&gt;http://wiki.metawerx.net/wiki/Web.xml.Distributable&lt;/a&gt;&lt;br/&gt;
&lt;a href="http://wiki.metawerx.net/wiki/ApplicationLoadBalancing"&gt;http://wiki.metawerx.net/wiki/ApplicationLoadBalancing&lt;/a&gt;&lt;br/&gt;
&lt;a href="http://wiki.metawerx.net/wiki/SessionReplicator"&gt;http://wiki.metawerx.net/wiki/SessionReplicator&lt;/a&gt;&lt;/p&gt;</description>
                <environment/>
            <key id="18553">IPL-4819</key>
            <summary>web.xml distributable in backoffice</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="1" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_red.png">1 (Dringend Wichtig)</priority>
                    <status id="10014" iconUrl="https://jira.billpay.intern/images/icons/silk/thumb_up.png">Specified</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="dpaufler">Daniel Paufler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jan 2012 20:45:06 +0100</created>
                <updated>Wed, 9 Jan 2013 16:46:19 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                <component>IT improvement</component>
                        <due/>
                    <votes>0</votes>
                          <timeoriginalestimate seconds="14400">4 hours</timeoriginalestimate>
                    <timeestimate seconds="0">0 minutes</timeestimate>
                    <timespent seconds="18000">5 hours</timespent>
                            <comments>
                    <comment id="39805" author="dpaufler" created="Mon, 19 Nov 2012 12:13:00 +0100">since 2 days, user start really complaining about logouts caused by Loadbalancer switches
&lt;br/&gt;

&lt;br/&gt;
rise priority to test &amp;amp; configure this distributable / session replication topic</comment>
                    <comment id="41015" author="rrodrigues" created="Tue, 18 Dec 2012 11:27:35 +0100">To be registered here,
&lt;br/&gt;
Daniel will make the necessary changes in the server configuration (server.xml) and handle the testing in the new release.</comment>
                    <comment id="41074" author="wmlynarski" created="Wed, 19 Dec 2012 17:37:22 +0100">Now it is for you to configure.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                                <inwardlinks description="belongs">
                            <issuelink>
            <issuekey id="22751">IPL-8877</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                        <issuelinktype id="10000">
                <name>dependency</name>
                                                <inwardlinks description="depends">
                            <issuelink>
            <issuekey id="22894">IPL-9020</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                                    <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[other]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                </customfields>
    </item>

<item>
            <title>[IPL-2988] Allow reverse cancellations via Backoffice</title>
                <link>https://jira.billpay.intern/browse/IPL-2988</link>
                <project id="10070" key="IPL">Billpay IT</project>
                        <description>&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Introduction&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;We need a reactivation button in the Back-Office to reactivate canceled debts under certain circumstances. This button will be available for all country/currency/payment methods combinations, when some conditions are true. Basically there will be 3 different cases, when we display the button in the BO. Due to our estimations, with these 3 cases we will cover more than 80% of the incidents which are going to occur. In all other cases we have to proceed the debts manually.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Description&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;table class='confluenceTable'&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class='confluenceTh'&gt;As-Is-Status&lt;/th&gt;
&lt;th class='confluenceTh'&gt;Should-Be-Status&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class='confluenceTd'&gt;Reactivations of debts were only proceeding manually by the IT-Team&lt;br/&gt;
documentation wiki: &lt;a href="https://wiki.billpay.intern/x/GoA9"&gt;https://wiki.billpay.intern/x/GoA9&lt;/a&gt;&lt;/td&gt;
&lt;td class='confluenceTd'&gt;Reactivations of debts can be triggered via BO from Admin or CC. (if some conditions are true)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Case 1&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;&lt;b&gt;Conditions&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1.&lt;/b&gt;	If we didn't receive money from the customer for the main order yet. ( no row exists in table ipaylater_debt.debt_transaction with dt_transaction_type where dtt_is_customer_transaction = TRUE. Ignore value in dt_debt_id column)&lt;br/&gt;
&lt;b&gt;2.&lt;/b&gt;	We didn't invoice the merchant. That means, no payout to merchant has taken place. ( no row exists in table ipaylater_debt.debt_transaction with dt_transaction_type where dtt_is_merchant_transaction = TRUE)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;set customer.customer_order to status = 2 for main + sub_order&lt;/li&gt;
	&lt;li&gt;set dept_status_customer to 2 (INITIATED)&lt;/li&gt;
	&lt;li&gt;set debt_merchant_status to 0 (UNASSIGNED)&lt;/li&gt;
	&lt;li&gt;delete the cancel entry from debt_log (DWH) -&amp;gt; to be clarified&lt;/li&gt;
	&lt;li&gt;delete the cancel entry from order_modification -&amp;gt; to be clarified&lt;/li&gt;
	&lt;li&gt;debt_action_log item ????&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;run check_main_order_status -&amp;gt; in order to set the right status&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Case 2&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;&lt;b&gt;Conditions&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1.&lt;/b&gt;	If we receive money from the customer for the main order. ( there exists a row in table ipaylater_debt.debt_transaction with dt_transaction_type where dtt_is_customer_transaction = TRUE. Ignore value in dt_debt_id column)&lt;br/&gt;
&lt;b&gt;But&lt;/b&gt; no customer reimbursement has taken place. (dt type 1 with negative amount does not exists + no entry in table customer_reimbursement for this main order exists)&lt;br/&gt;
&lt;b&gt;2.&lt;/b&gt;	We didn't invoice the merchant. That means, no payout to merchant has taken place. ( no row exists in table ipaylater_debt.debt_transaction with dt_transaction_type where dtt_is_merchant_transaction = TRUE)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;set customer.customer_order to status = 2 for main + sub_order&lt;/li&gt;
	&lt;li&gt;set dept_status_customer to 2 (INITIATED)&lt;/li&gt;
	&lt;li&gt;set debt_merchant_status to 0 (UNASSIGNED)&lt;/li&gt;
	&lt;li&gt;delete the cancel entry from debt_log (DWH)&lt;/li&gt;
	&lt;li&gt;delete the cancel entry from order_modification&lt;/li&gt;
	&lt;li&gt;delete the reimbursement entry from ipaylater_reimbursement.customer_reimbursement_log&lt;/li&gt;
	&lt;li&gt;delete the reimbursement entry from ipaylater_reimbursement.customer_reimbursement&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;run check_main_order_status -&amp;gt; in order to set the right status&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Case 3&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;p&gt;&lt;b&gt;Conditions&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1.&lt;/b&gt;	No customer reimbursement has taken place (i.e. no row in table ipaylater_reimbursement.customer_reimbursement with cr_status != 0 exists)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2.&lt;/b&gt;	merchant was already paid out (In the table: ipaylater_debt.debt_transaction the dt_transaction_type 3 and/or 4 exists with dt_transaction_batch != NULL) &lt;b&gt;AND&lt;/b&gt; dt_transaction_type 6 and/or 7 with dt_transaction_batch = NULL exists. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;TODO&lt;/b&gt;&lt;/p&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;set customer.customer_order to status = 2 for main + sub_order&lt;/li&gt;
	&lt;li&gt;delete dt_transaction_type 6 and/or 7 for that debt&lt;/li&gt;
	&lt;li&gt;set dept_status_customer to 2 (INITIATED)&lt;/li&gt;
	&lt;li&gt;set debt_merchant_status to 6 (REIMBURSEMENT_DONE)&lt;/li&gt;
	&lt;li&gt;delete the cancel entry from debt_log (DWH)&lt;/li&gt;
	&lt;li&gt;delete the cancel entry from order_modification&lt;/li&gt;
	&lt;li&gt;delete the reimbursement entry from ipaylater_reimbursement.customer_reimbursement_log&lt;/li&gt;
	&lt;li&gt;delete the reimbursement entry from ipaylater_reimbursement.customer_reimbursement&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;run check_main_order_status -&amp;gt; in order to set the right status&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class="panel" style="background-color: #FFFFCE;border-color: #ccc;border-style: dashed;border-width: 1px;"&gt;&lt;div class="panelHeader" style="border-bottom-width: 1px;border-bottom-style: dashed;border-bottom-color: #ccc;background-color: #F7D6C1;"&gt;&lt;b&gt;Note/Additional Information&lt;/b&gt;&lt;/div&gt;&lt;div class="panelContent" style="background-color: #FFFFCE;"&gt;
&lt;ul class="alternate" type="square"&gt;
	&lt;li&gt;"Same" button in order history table that triggers different actions, depending on which conditions are true&lt;/li&gt;
	&lt;li&gt;This story is only about reactivate full canceled orders.&lt;/li&gt;
	&lt;li&gt;please log the event in the history table. See attachment.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment/>
            <key id="16624">IPL-2988</key>
            <summary>Allow reverse cancellations via Backoffice</summary>
                <type id="6" iconUrl="https://jira.billpay.intern/images/icons/silk/user_comment.png">User Story</type>
                                <priority id="2" iconUrl="https://jira.billpay.intern/images/icons/silk/flag_yellow.png">2 (Dringend)</priority>
                    <status id="10014" iconUrl="https://jira.billpay.intern/images/icons/silk/thumb_up.png">Specified</status>
                    <resolution id="-1">Unresolved</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jwehrs">Jan Wehrs</reporter>
                        <labels>
                        <label>Backoffice</label>
                    </labels>
                <created>Mon, 4 Jul 2011 12:18:27 +0200</created>
                <updated>Tue, 8 Jan 2013 13:16:02 +0100</updated>
                                                    <fixVersion>43. Sprint</fixVersion>
                                <component>application - backoffice</component>
                        <due/>
                    <votes>0</votes>
                                                    <aggregatetimeoriginalestimate seconds="180000">1 week, 1 day, 2 hours</aggregatetimeoriginalestimate>
                        <aggregatetimeremainingestimate seconds="180000">1 week, 1 day, 2 hours</aggregatetimeremainingestimate>
                                      <comments>
                    <comment id="37649" author="jwehrs" created="Sun, 9 Sep 2012 12:18:39 +0200">Must be specified more precisely</comment>
                    <comment id="41269" author="jwehrs" created="Thu, 3 Jan 2013 18:34:06 +0100">Find 80:20 solution e.g. allow reversed action only if payout to the merchant did not take place and customer didn&amp;#39;t pay so far (best case because easy to implement)</comment>
                    <comment id="41285" author="skuhn" created="Fri, 4 Jan 2013 16:09:03 +0100">Old description:
&lt;br/&gt;

&lt;br/&gt;

&lt;br/&gt;
Es mehren sich die Anfragen Bestellungen, die f&amp;#xE4;lschlicherweise storniert worden sind, wieder freizugeben.
&lt;br/&gt;

&lt;br/&gt;
Notwendige Aktionen:
&lt;br/&gt;

&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;H&amp;#xE4;ndler- und Kunden- Forderungsstatus anpassn
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bestellstatus anpassen
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Stornierungsgeb&amp;#xFC;hr r&amp;#xFC;ckabwickeln
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;evtl. vorhandene R&amp;#xFC;ckabwicklung der Auszahlung/Disagio gegenbuchen
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Nach Re-Aktivierung der Bestellung muss Zahlungsziel in der Zukunft liegen
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bei einer eventuell schon stattgefundenen R&amp;#xFC;ck&amp;#xFC;berweisung an den Endkunden muss dieser informiert werden, dass die Bestellung nun wieder aktiv ist und er nochmals zahlen muss.
&lt;br/&gt;

&lt;br/&gt;
Hierbei muss auf den Status Der Forderung R&amp;#xFC;cksicht genommen werden, im speziellen:
&lt;br/&gt;
Ist diese Forderung schon abgerechnet (In H&amp;#xE4;ndlerabrechnung enthalten) ?
&lt;br/&gt;
</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>association</name>
                                <outwardlinks description="belongs to">
                            <issuelink>
            <issuekey id="23113">IPL-9232</issuekey>
        </issuelink>
                    </outwardlinks>
                                                <inwardlinks description="belongs">
                            <issuelink>
            <issuekey id="22368">IPL-8506</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22373">IPL-8511</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22379">IPL-8517</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22359">IPL-8497</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22376">IPL-8514</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22377">IPL-8515</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22405">IPL-8543</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22380">IPL-8518</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22382">IPL-8520</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                        <issuelinktype id="10000">
                <name>dependency</name>
                                                <inwardlinks description="depends">
                            <issuelink>
            <issuekey id="22373">IPL-8511</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22379">IPL-8517</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22368">IPL-8506</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22371">IPL-8509</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="23090">IPL-9209</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22117">IPL-8262</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22943">IPL-9069</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="20013">IPL-6238</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="20353">IPL-6548</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="20755">IPL-6927</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22366">IPL-8504</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22369">IPL-8507</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22378">IPL-8516</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22466">IPL-8604</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22465">IPL-8603</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22563">IPL-8689</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="20560">IPL-6751</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="23179">IPL-9298</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22114">IPL-8259</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="20522">IPL-6715</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="20572">IPL-6763</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="21691">IPL-7850</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22377">IPL-8515</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22376">IPL-8514</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22207">IPL-8345</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22038">IPL-8184</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="20749">IPL-6921</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="23083">IPL-9202</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22864">IPL-8990</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22782">IPL-8908</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22759">IPL-8885</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22758">IPL-8884</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22749">IPL-8875</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22735">IPL-8861</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22712">IPL-8838</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22394">IPL-8532</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="21155">IPL-7320</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22132">IPL-8277</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22404">IPL-8542</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22358">IPL-8496</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22370">IPL-8508</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22381">IPL-8519</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="22382">IPL-8520</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="21337" name="full_cancelation_reactivation_button_07.01.2013_v2.png" size="265372" author="skuhn" created="Mon, 7 Jan 2013 14:06:34 +0100"/>
                    <attachment id="21322" name="transaction_type_extension.png" size="51282" author="jwehrs" created="Mon, 7 Jan 2013 10:06:43 +0100"/>
                </attachments>
            <subtasks>
            <subtask id="23260">IPL-9379</subtask>
            <subtask id="23261">IPL-9380</subtask>
            <subtask id="23262">IPL-9381</subtask>
            <subtask id="23263">IPL-9382</subtask>
            <subtask id="23264">IPL-9383</subtask>
            <subtask id="23265">IPL-9384</subtask>
        </subtasks>
                <customfields>
                                                    <customfield id="customfield_10072" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>Software Function</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[inconsistency]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                <customfieldname>StoryPoints</customfieldname>
                <customfieldvalues>
                    <customfieldvalue><![CDATA[8]]></customfieldvalue>

                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>